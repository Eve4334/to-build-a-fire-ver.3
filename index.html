<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>你能在零下50度中活下來嗎？</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body {
    background: linear-gradient(135deg, #a8d0ff 0%, #002f52 100%);
    color: #e0f0ff;
    font-family: 'Noto Sans TC', sans-serif;
    min-height: 100vh;
    position: relative;
    overflow-x: hidden;
  }
  .snowflake {
    position: fixed;
    top: -10px;
    color: #d0e7ff;
    font-size: 1.2rem;
    user-select: none;
    pointer-events: none;
    animation-name: fall;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
  }
  @keyframes fall {
    0% { transform: translateY(0) translateX(0); opacity: 1; }
    100% { transform: translateY(100vh) translateX(20px); opacity: 0; }
  }
  .frost-card {
    background: rgba(255 255 255 / 0.15);
    backdrop-filter: blur(8px);
    border-radius: 16px;
    box-shadow: 0 0 15px rgba(255 255 255 / 0.25);
    padding: 20px;
  }
  .btn-ice {
    background: linear-gradient(135deg, #4fc3f7, #0288d1);
    box-shadow: 0 4px 15px rgba(4, 121, 197, 0.6);
    color: white;
    font-weight: 600;
    border-radius: 8px;
    transition: all 0.3s ease;
    user-select: none;
  }
  .btn-ice:hover {
    background: linear-gradient(135deg, #6dd5fa, #0d47a1);
    box-shadow: 0 6px 20px rgba(4, 121, 197, 0.8);
    transform: scale(1.05);
  }
  .btn-ice:active {
    animation: crack 0.4s ease forwards;
  }
  @keyframes crack {
    0% {
      box-shadow: 0 0 15px #a0e9ff;
      transform: scale(1);
      filter: brightness(1);
    }
    50% {
      box-shadow:
        0 0 10px #a0e9ff,
        0 0 20px #00bfff,
        0 0 40px #00f0ff;
      filter: brightness(1.3);
      transform: scale(1.1);
    }
    100% {
      box-shadow: none;
      filter: brightness(1);
      transform: scale(1);
    }
  }
  .option-btn {
    margin: 10px 0;
    display: block;
    width: 100%;
    text-align: center;
  }
  #langToggle {
    position: fixed;
    top: 12px;
    right: 12px;
    background: rgba(255 255 255 / 0.15);
    border: none;
    color: #e0f0ff;
    padding: 8px 16px;
    font-weight: 600;
    border-radius: 12px;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s ease;
  }
  #langToggle:hover {
    background: rgba(255 255 255 / 0.3);
  }
</style>
</head>
<body>
  <button id="langToggle">English</button>

  <div id="snow-container"></div>

  <div class="max-w-xl mx-auto p-6 frost-card mt-10">
    <h1 id="title" class="text-4xl font-bold mb-6 text-center drop-shadow-lg">你能在零下50度中活下來嗎？</h1>

    <div id="quiz">
      <div id="questionText" class="text-xl mb-4"></div>
      <div id="options"></div>
      <button id="nextBtn" class="btn-ice px-5 py-3 mt-4 w-full" disabled>下一題</button>
    </div>

    <div id="result" class="mt-8 hidden text-white text-center">
      <h2 id="resultTitle" class="text-3xl font-semibold mb-4 drop-shadow-lg">你的求生人格</h2>
      <canvas id="radarChart" width="300" height="300"></canvas>
      <p id="typeText" class="mt-5 text-xl font-medium max-w-lg mx-auto"></p>
      <p id="descText" class="mt-4 max-w-lg mx-auto leading-relaxed text-blue-200"></p>
    </div>
  </div>

<script>
  const quizData = {
    zh: [
      {
        text: "你發現氣溫已降到零下五十度，你會？",
        options: [
          { text: "按計畫出發，我相信自己判斷", score: { I: 1, T: 1 } },
          { text: "改變計畫，等有人陪我再出發", score: { F: 1, J: 1 } },
          { text: "想太多會拖慢進度，先走再說", score: { E: 1, P: 1 } },
          { text: "不出發，尋找安全處等待救援", score: { I: 1, J: 1 } }
        ]
      },
      {
        text: "途中你掉進了冰冷的溪水，你會怎麼辦？",
        options: [
          { text: "找樹下避風處再升火", score: { J: 1, S: 1 } },
          { text: "立刻原地升火，不能再拖了", score: { P: 1, T: 1 } },
          { text: "嘗試靠奔跑取暖", score: { E: 1, S: 1 } },
          { text: "保持冷靜，脫掉濕衣，尋找乾燥地方保暖", score: { I: 1, N: 1 } }
        ]
      },
      {
        text: "你好不容易點起火但火卻熄滅了，你會怎麼做？",
        options: [
          { text: "尋找樹枝與更好的位置重新嘗試", score: { T: 1, S: 1 } },
          { text: "內心開始出現絕望與過往回憶", score: { I: 1, N: 1 } },
          { text: "用身體取暖，等待救援", score: { I: 1, N: 1 } },
          { text: "嘗試喊叫求救或尋找其他人", score: { E: 1, F: 1 } }
        ]
      },
      {
        text: "手指凍傷幾乎不能動，你會？",
        options: [
          { text: "咬牙繼續嘗試升火，我不能停下", score: { T: 1, J: 1 } },
          { text: "坐下來保存體力，想著自己過去的人生", score: { I: 1, N: 1 } },
          { text: "嘗試用嘴或其他部位取代雙手動作", score: { S: 1, P: 1 } },
          { text: "大喊發洩情緒，希望釋放壓力", score: { E: 1, F: 1 } }
        ]
      },
      {
        text: "你沒有任何的火柴能夠點火了，你會？",
        options: [
          { text: "放下一切靜靜等待，也許是命運的安排", score: { I: 1, N: 1 } },
          { text: "抱住狗，試圖從牠身上取暖", score: { F: 1, S: 1 } },
          { text: "盡最後一絲力氣繼續前進", score: { T: 1, J: 1 } },
          { text: "試圖找出能發出訊號的東西求救", score: { E: 1, P: 1 } }
        ]
      }
    ],
    en: [
      {
        text: "You find the temperature has dropped to minus fifty degrees. What will you do?",
        options: [
          { text: "Start as planned, I trust my judgment", score: { I: 1, T: 1 } },
          { text: "Change plans, wait for someone to accompany me", score: { F: 1, J: 1 } },
          { text: "Overthinking slows progress, just go first", score: { E: 1, P: 1 } },
          { text: "Don't depart, find a safe place and wait for rescue", score: { I: 1, J: 1 } }
        ]
      },
      {
        text: "You fell into icy cold water. What will you do?",
        options: [
          { text: "Find shelter under a tree and make a fire", score: { J: 1, S: 1 } },
          { text: "Immediately start a fire on the spot, no delay", score: { P: 1, T: 1 } },
          { text: "Try to warm up by running", score: { E: 1, S: 1 } },
          { text: "Stay calm, remove wet clothes, find dry place to warm up", score: { I: 1, N: 1 } }
        ]
      },
      {
        text: "You managed to light a fire, but it went out. What will you do?",
        options: [
          { text: "Look for branches and a better spot to try again", score: { T: 1, S: 1 } },
          { text: "Feel despair and recall past memories", score: { I: 1, N: 1 } },
          { text: "Warm your body and wait for rescue", score: { I: 1, N: 1 } },
          { text: "Try to shout for help or find others", score: { E: 1, F: 1 } }
        ]
      },
      {
        text: "Your fingers are frostbitten and barely movable. What will you do?",
        options: [
          { text: "Grind teeth and keep trying to make fire, can't stop", score: { T: 1, J: 1 } },
          { text: "Sit down to conserve energy, think about past life", score: { I: 1, N: 1 } },
          { text: "Try to use mouth or other body parts to replace hands", score: { S: 1, P: 1 } },
          { text: "Shout out to vent emotions, hope to release stress", score: { E: 1, F: 1 } }
        ]
      },
      {
        text: "You have no matches left to light a fire. What will you do?",
        options: [
          { text: "Give up everything and wait quietly, maybe fate", score: { I: 1, N: 1 } },
          { text: "Hug a dog to try to keep warm", score: { F: 1, S: 1 } },
          { text: "Use the last bit of strength to move forward", score: { T: 1, J: 1 } },
          { text: "Try to find something to send a signal for help", score: { E: 1, P: 1 } }
        ]
      }
    ]
  };

  const descriptions = {
    zh: {
      ISTJ: "你是嚴謹踏實的求生者，擅長計畫和執行，冷靜面對挑戰。",
      ISFJ: "你注重安全與細節，願意為團隊付出，是可靠的守護者。",
      INFJ: "你有直覺與洞察力，善於理解環境與人心，具有遠見。",
      INTJ: "你是策略家，擅長分析與規劃，追求目標明確。",
      ISTP: "你實用且冷靜，善於應變，注重當下行動。",
      ISFP: "你溫柔且有藝術感，善於觀察，重視和諧。",
      INFP: "你理想主義且有同理心，追求內心真實與價值。",
      INTP: "你喜歡思考和探索，善於解決問題與理論建構。",
      ESTP: "你勇敢果斷，喜歡冒險和實際行動。",
      ESFP: "你開朗活潑，享受當下，善於社交。",
      ENFP: "你熱情創意，充滿活力，喜歡嘗試新事物。",
      ENTP: "你聰明靈活，善於辯論和創新。",
      ESTJ: "你務實且有組織，喜歡掌控和領導。",
      ESFJ: "你親切熱情，重視人際關係和團隊合作。",
      ENFJ: "你有魅力且有說服力，善於激勵他人。",
      ENTJ: "你是天生的領導者，目標明確，行動力強。"
    },
    en: {
      ISTJ: "You are a meticulous and practical survivor, good at planning and execution, facing challenges calmly.",
      ISFJ: "You value safety and details, willing to contribute to the team, a reliable protector.",
      INFJ: "You have intuition and insight, good at understanding environment and people, visionary.",
      INTJ: "You are a strategist, good at analysis and planning, with clear goals.",
      ISTP: "You are practical and calm, good at adapting, focused on the moment.",
      ISFP: "You are gentle and artistic, observant, valuing harmony.",
      INFP: "You are idealistic and empathetic, pursuing inner truth and values.",
      INTP: "You like thinking and exploring, good at problem solving and theory building.",
      ESTP: "You are brave and decisive, enjoy adventure and practical action.",
      ESFP: "You are cheerful and lively, enjoy the moment, good at socializing.",
      ENFP: "You are enthusiastic and creative, full of energy, love trying new things.",
      ENTP: "You are smart and flexible, good at debating and innovation.",
      ESTJ: "You are practical and organized, like control and leadership.",
      ESFJ: "You are friendly and warm, value relationships and teamwork.",
      ENFJ: "You are charismatic and persuasive, good at motivating others.",
      ENTJ: "You are a natural leader, goal-oriented, strong in action."
    }
  };

  // 語言預設 zh
  let lang = 'zh';
  let currentIndex = 0;
  let scores = { E:0, I:0, S:0, N:0, T:0, F:0, J:0, P:0 };

  const titleEl = document.getElementById('title');
  const questionTextEl = document.getElementById('questionText');
  const optionsEl = document.getElementById('options');
  const nextBtn = document.getElementById('nextBtn');
  const resultDiv = document.getElementById('result');
  const typeText = document.getElementById('typeText');
  const descText = document.getElementById('descText');
  const resultTitle = document.getElementById('resultTitle');
  const langToggle = document.getElementById('langToggle');

  function updateText() {
    titleEl.textContent = lang === 'zh' ? '你能在零下50度中活下來嗎？' : 'Can You Survive at Minus 50 Degrees?';
    resultTitle.textContent = lang === 'zh' ? '你的求生人格' : 'Your Survival Personality';
    nextBtn.textContent = lang === 'zh' ? '下一題' : 'Next Question';
  }

  function loadQuestion(index) {
    const q = quizData[lang][index];
    questionTextEl.textContent = q.text;
    optionsEl.innerHTML = '';
    nextBtn.disabled = true;

    q.options.forEach((opt, i) => {
      const btn = document.createElement('button');
      btn.className = 'btn-ice option-btn';
      btn.textContent = opt.text;
      btn.onclick = () => {
        // 清除所有按鈕的選中狀態
        Array.from(optionsEl.children).forEach(b => b.style.background = '');
        btn.style.background = 'linear-gradient(135deg, #6dd5fa, #0d47a1)';
        // 記錄分數
        Object.entries(opt.score).forEach(([k,v]) => {
          scores[k] += v;
        });
        nextBtn.disabled = false;
      };
      optionsEl.appendChild(btn);
    });
  }

  function calculate

