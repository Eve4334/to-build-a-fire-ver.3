<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>你能在零下50度中活下來嗎？</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body {
    background: linear-gradient(135deg, #a8d0ff 0%, #002f52 100%);
    color: #e0f0ff;
    font-family: 'Noto Sans TC', sans-serif;
    min-height: 100vh;
    position: relative;
    overflow-x: hidden;
  }
  .frost-card {
    background: rgba(255 255 255 / 0.15);
    backdrop-filter: blur(8px);
    border-radius: 16px;
    box-shadow: 0 0 15px rgba(255 255 255 / 0.25);
    padding: 20px;
  }
  .btn-ice {
    background: linear-gradient(135deg, #4fc3f7, #0288d1);
    box-shadow: 0 4px 15px rgba(4, 121, 197, 0.6);
    color: white;
    font-weight: 600;
    border-radius: 8px;
    transition: all 0.3s ease;
    user-select: none;
  }
  .btn-ice:hover {
    background: linear-gradient(135deg, #6dd5fa, #0d47a1);
    box-shadow: 0 6px 20px rgba(4, 121, 197, 0.8);
    transform: scale(1.05);
  }
  .option-btn {
    margin: 10px 0;
    display: block;
    width: 100%;
    text-align: center;
  }
  #langToggle {
    position: fixed;
    top: 12px;
    right: 12px;
    background: rgba(255 255 255 / 0.15);
    border: none;
    color: #e0f0ff;
    padding: 8px 16px;
    font-weight: 600;
    border-radius: 12px;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s ease;
  }
  #langToggle:hover {
    background: rgba(255 255 255 / 0.3);
  }
  #result {
    margin-top: 40px;
  }
</style>
</head>
<body>
  <button id="langToggle">English</button>

  <div class="max-w-xl mx-auto p-6 frost-card mt-10">
    <h1 id="title" class="text-4xl font-bold mb-6 text-center drop-shadow-lg">你能在零下50度中活下來嗎？</h1>

    <div id="quiz">
      <div id="questionText" class="text-xl mb-4"></div>
      <div id="options"></div>
      <button id="nextBtn" class="btn-ice px-5 py-3 mt-4 w-full" disabled>下一題</button>
    </div>

    <div id="result" class="hidden text-white text-center">
      <h2 id="resultTitle" class="text-3xl font-semibold mb-4 drop-shadow-lg">你的求生人格</h2>
      <canvas id="radarChart" width="300" height="300"></canvas>
      <p id="typeText" class="mt-5 text-xl font-medium max-w-lg mx-auto"></p>
      <p id="descText" class="mt-4 max-w-lg mx-auto leading-relaxed text-blue-200"></p>
    </div>
  </div>

<script>
  // 題目資料
  const quizData = {
    zh: [
      {
        text: "你發現氣溫已降到零下五十度，你會？",
        options: [
          { text: "按計畫出發，我相信自己判斷", score: { I: 1, T: 1 } },
          { text: "改變計畫，等有人陪我再出發", score: { F: 1, J: 1 } },
          { text: "想太多會拖慢進度，先走再說", score: { E: 1, P: 1 } },
          { text: "不出發，尋找安全處等待救援", score: { I: 1, J: 1 } }
        ]
      },
      {
        text: "途中你掉進了冰冷的溪水，你會怎麼辦？",
        options: [
          { text: "找樹下避風處再升火", score: { J: 1, S: 1 } },
          { text: "立刻原地升火，不能再拖了", score: { P: 1, T: 1 } },
          { text: "嘗試靠奔跑取暖", score: { E: 1, S: 1 } },
          { text: "保持冷靜，脫掉濕衣，尋找乾燥地方保暖", score: { I: 1, N: 1 } }
        ]
      },
      {
        text: "你好不容易點起火但火卻熄滅了，你會怎麼做？",
        options: [
          { text: "尋找樹枝與更好的位置重新嘗試", score: { T: 1, S: 1 } },
          { text: "內心開始出現絕望與過往回憶", score: { I: 1, N: 1 } },
          { text: "用身體取暖，等待救援", score: { I: 1, N: 1 } },
          { text: "嘗試喊叫求救或尋找其他人", score: { E: 1, F: 1 } }
        ]
      },
      {
        text: "手指凍傷幾乎不能動，你會？",
        options: [
          { text: "咬牙繼續嘗試升火，我不能停下", score: { T: 1, J: 1 } },
          { text: "坐下來保存體力，想著自己過去的人生", score: { I: 1, N: 1 } },
          { text: "嘗試用嘴或其他部位取代雙手動作", score: { S: 1, P: 1 } },
          { text: "大喊發洩情緒，希望釋放壓力", score: { E: 1, F: 1 } }
        ]
      },
      {
        text: "你沒有任何的火柴能夠點火了，你會？",
        options: [
          { text: "放下一切靜靜等待，也許是命運的安排", score: { I: 1, N: 1 } },
          { text: "抱住狗，試圖從牠身上取暖", score: { F: 1, S: 1 } },
          { text: "盡最後一絲力氣繼續前進", score: { T: 1, J: 1 } },
          { text: "試圖找出能發出訊號的東西求救", score: { E: 1, P: 1 } }
        ]
      }
    ],
    en: [
      {
        text: "You find the temperature has dropped to minus fifty degrees. What will you do?",
        options: [
          { text: "Start as planned, I trust my judgment", score: { I: 1, T: 1 } },
          { text: "Change plans, wait for someone to accompany me", score: { F: 1, J: 1 } },
          { text: "Overthinking slows progress, just go first", score: { E: 1, P: 1 } },
          { text: "Don't depart, find a safe place and wait for rescue", score: { I: 1, J: 1 } }
        ]
      },
      {
        text: "You fell into icy cold water. What will you do?",
        options: [
          { text: "Find shelter under a tree and make a fire", score: { J: 1, S: 1 } },
          { text: "Immediately start a fire on the spot, no delay", score: { P: 1, T: 1 } },
          { text: "Try to warm up by running", score: { E: 1, S: 1 } },
          { text: "Stay calm, remove wet clothes, find dry place to warm up", score: { I: 1, N: 1 } }
        ]
      },
      {
        text: "You managed to light a fire, but it went out. What will you do?",
        options: [
          { text: "Look for branches and a better spot to try again", score: { T: 1, S: 1 } },
          { text: "Feel despair and recall past memories", score: { I: 1, N: 1 } },
          { text: "Warm your body and wait for rescue", score: { I: 1, N: 1 } },
          { text: "Try to shout for help or find others", score: { E: 1, F: 1 } }
        ]
      },
      {
        text: "Your fingers are frostbitten and barely movable. What will you do?",
        options: [
          { text: "Grind teeth and keep trying to make fire, can't stop", score: { T: 1, J: 1 } },
          { text: "Sit down to conserve energy, think about past life", score: { I: 1, N: 1 } },
          { text: "Try to use mouth or other body parts to replace hands", score: { S: 1, P: 1 } },
          { text: "Shout to vent emotions and release stress", score: { E: 1, F: 1 } }
        ]
      },
      {
        text: "You have no matches left to start a fire. What will you do?",
        options: [
          { text: "Give up and wait quietly, maybe fate has a plan", score: { I: 1, N: 1 } },
          { text: "Hold onto a dog and try to get warmth", score: { F: 1, S: 1 } },
          { text: "Use last bit of strength to keep moving forward", score: { T: 1, J: 1 } },
          { text: "Try to find something to signal for help", score: { E: 1, P: 1 } }
        ]
      }
    ]
  };

  const mbtiDescriptions = {
    zh: {
      ISTJ: "務實且有責任感的守護者，喜歡計畫與秩序。",
      ISFJ: "溫柔且細心的守護者，重視傳統與他人需求。",
      INFJ: "深思且理想主義的顧問，尋求意義與成長。",
      INTJ: "獨立且有策略性的規劃者，重視知識與效率。",
      ISTP: "冷靜且實用的問題解決者，喜歡動手做事。",
      ISFP: "溫和且有藝術感的靈魂，享受當下與美感。",
      INFP: "理想且富同情心的調停者，追求內心價值。",
      INTP: "分析且好奇的思想家，喜歡理論與探究。",
      ESTP: "活潑且冒險的實踐者，擅長應對緊急狀況。",
      ESFP: "開朗且愛熱鬧的表演者，享受生活樂趣。",
      ENFP: "熱情且有創意的激勵者，喜歡新想法與人群。",
      ENTP: "機智且善辯的發明家，喜歡挑戰與改變。",
      ESTJ: "組織且實際的管理者，擅長計劃與決策。",
      ESFJ: "親切且合作的照顧者，重視和諧與支持。",
      ENFJ: "有魅力且具同理心的領導者，激勵他人成長。",
      ENTJ: "果斷且有遠見的指揮官，擅長戰略與領導。"
    },
    en: {
      ISTJ: "Responsible and practical guardian who values order and planning.",
      ISFJ: "Gentle and caring protector who values tradition and others' needs.",
      INFJ: "Thoughtful and idealistic counselor seeking meaning and growth.",
      INTJ: "Independent and strategic planner valuing knowledge and efficiency.",
      ISTP: "Calm and practical problem-solver who likes hands-on tasks.",
      ISFP: "Gentle and artistic soul who enjoys the moment and aesthetics.",
      INFP: "Idealistic and compassionate mediator pursuing inner values.",
      INTP: "Analytical and curious thinker who enjoys theories and exploration.",
      ESTP: "Lively and adventurous doer skilled at handling emergencies.",
      ESFP: "Cheerful and outgoing performer who enjoys life’s pleasures.",
      ENFP: "Passionate and creative motivator who loves new ideas and people.",
      ENTP: "Witty and argumentative inventor who enjoys challenges and change.",
      ESTJ: "Organized and practical manager skilled in planning and decisions.",
      ESFJ: "Kind and cooperative caregiver who values harmony and support.",
      ENFJ: "Charismatic and empathetic leader who inspires growth in others.",
      ENTJ: "Decisive and visionary commander skilled in strategy and leadership."
    }
  };

  let currentLang = "zh";
  let currentQuestionIndex = 0;
  let scores = { E:0, I:0, S:0, N:0, T:0, F:0, J:0, P:0 };
  let selectedOptionIndex = null;
  let radarChart = null;

  const titleEl = document.getElementById("title");
  const questionTextEl = document.getElementById("questionText");
  const optionsEl = document.getElementById("options");
  const nextBtn = document.getElementById("nextBtn");
  const resultEl = document.getElementById("result");
  const typeText = document.getElementById("typeText");
  const descText = document.getElementById("descText");
  const resultTitle = document.getElementById("resultTitle");
  const langToggle = document.getElementById("langToggle");

  function loadQuestion() {
    nextBtn.disabled = true;
    selectedOptionIndex = null;
    const question = quizData[currentLang][currentQuestionIndex];
    questionTextEl.textContent = question.text;
    optionsEl.innerHTML = "";

    question.options.forEach((opt, idx) => {
      const btn = document.createElement("button");
      btn.textContent = opt.text;
      btn.className = "btn-ice option-btn";
      btn.type = "button";
      btn.onclick = () => {
        selectedOptionIndex = idx;
        nextBtn.disabled = false;
        // 標示選取狀態
        Array.from(optionsEl.children).forEach(b => b.classList.remove("opacity-60"));
        btn.classList.remove("opacity-60");
        Array.from(optionsEl.children).forEach(b => b !== btn ? b.classList.add("opacity-60") : null);
      };
      optionsEl.appendChild(btn);
    });
  }

  function calculateResult() {
    // 累加分數
    const question = quizData[currentLang][currentQuestionIndex];
    const chosen = question.options[selectedOptionIndex];
    for (const key in chosen.score) {
      scores[key] += chosen.score[key];
    }
  }

  function getMBTI() {
    // E vs I
    let EI = scores.E >= scores.I ? "E" : "I";
    // S vs N
    let SN = scores.S >= scores.N ? "S" : "N";
    // T vs F
    let TF = scores.T >= scores.F ? "T" : "F";
    // J vs P
    let JP = scores.J >= scores.P ? "J" : "P";
    return EI + SN + TF + JP;
  }

  function showResult() {
    document.getElementById("quiz").classList.add("hidden");
    resultEl.classList.remove("hidden");
    const mbti = getMBTI();
    typeText.textContent = mbti;
    descText.textContent = mbtiDescriptions[currentLang][mbti] || "未知人格";
    resultTitle.textContent = currentLang === "zh" ? "你的求生人格" : "Your Survival Personality";

    // 顯示雷達圖
    const data = {
      labels: ['E', 'I', 'S', 'N', 'T', 'F', 'J', 'P'],
      datasets: [{
        label: mbti,
        data: [
          scores.E,
          scores.I,
          scores.S,
          scores.N,
          scores.T,
          scores.F,
          scores.J,
          scores.P
        ],
        fill: true,
        backgroundColor: 'rgba(79, 195, 247, 0.4)',
        borderColor: '#04A9F4',
        pointBackgroundColor: '#0288D1',
        pointBorderColor: '#fff',
        pointHoverBackgroundColor: '#fff',
        pointHoverBorderColor: '#0288D1'
      }]
    };

    const config = {
      type: 'radar',
      data: data,
      options: {
        scales: {
          r: {
            angleLines: { display: true },
            suggestedMin: 0,
            suggestedMax: 5
          }
        }
      }
    };

    if (radarChart) {
      radarChart.destroy();
    }
    const ctx =

